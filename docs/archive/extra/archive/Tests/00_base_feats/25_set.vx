// Test: SetAlpha - Hash set implementation
// Expected: Tests for Set operations


fn test_set_create(): i32 {
    let set = SetAlpha.new<str>();
    
    if set.isEmpty() {
        return 1;  // Pass: new set is empty
    };
    return 0;  // Fail
}

fn test_set_insert(): i32 {
    let! set = SetAlpha.new<str>();
    
    let new1 = set.insert("apple");
    let new2 = set.insert("banana");
    let dup = set.insert("apple");  // Duplicate
    
    if new1 && new2 && !dup && set.len() == 2 {
        return 1;  // Pass
    };
    return 0;  // Fail
}

fn test_set_contains(): i32 {
    let! set = SetAlpha.new<i32>();
    
    set.insert(10);
    set.insert(20);
    set.insert(30);
    
    if set.contains(10) && set.contains(20) && set.contains(30) && !set.contains(99) {
        return 1;  // Pass
    };
    return 0;  // Fail
}

fn test_set_remove(): i32 {
    let! set = SetAlpha.new<str>();
    
    set.insert("item");
    
    if !set.contains("item") {
        return 0;  // Fail: item should exist
    };
    
    let removed = set.remove("item");
    let not_found = set.remove("missing");
    
    if removed && !not_found && !set.contains("item") {
        return 1;  // Pass
    };
    return 0;  // Fail
}

fn test_set_clear(): i32 {
    let! set = SetAlpha.new<i32>();
    
    set.insert(1);
    set.insert(2);
    set.insert(3);
    
    set.clear();
    
    if set.isEmpty() && set.len() == 0 {
        return 1;  // Pass
    };
    return 0;  // Fail
}

fn test_set_withCap(): i32 {
    let set = SetAlpha.withCapacity<str>(50);
    
    if set.isEmpty() {
        return 1;  // Pass
    };
    return 0;  // Fail
}

fn test_set_uniqueness(): i32 {
    let! set = SetAlpha.new<i32>();
    
    // Insert same element multiple times
    set.insert(42);
    set.insert(42);
    set.insert(42);
    set.insert(42);
    
    // Should only have 1 element
    if set.len() == 1 && set.contains(42) {
        return 1;  // Pass
    };
    return 0;  // Fail
}

fn main(): i32 {
    let! passed = 0;
    let! failed = 0;
    
    $print("=== SetAlpha Tests ===\n");
    
    // Test 1: Create
    if test_set_create() == 1 {
        $print("✓ test_set_create\n");
        passed = passed + 1;
    } else {
        $print("✗ test_set_create\n");
        failed = failed + 1;
    };
    
    // Test 2: Insert
    if test_set_insert() == 1 {
        $print("✓ test_set_insert\n");
        passed = passed + 1;
    } else {
        $print("✗ test_set_insert\n");
        failed = failed + 1;
    };
    
    // Test 3: Contains
    if test_set_contains() == 1 {
        $print("✓ test_set_contains\n");
        passed = passed + 1;
    } else {
        $print("✗ test_set_contains\n");
        failed = failed + 1;
    };
    
    // Test 4: Remove
    if test_set_remove() == 1 {
        $print("✓ test_set_remove\n");
        passed = passed + 1;
    } else {
        $print("✗ test_set_remove\n");
        failed = failed + 1;
    };
    
    // Test 5: Clear
    if test_set_clear() == 1 {
        $print("✓ test_set_clear\n");
        passed = passed + 1;
    } else {
        $print("✗ test_set_clear\n");
        failed = failed + 1;
    };
    
    // Test 6: With Capacity
    if test_set_withCap() == 1 {
        $print("✓ test_set_withCap\n");
        passed = passed + 1;
    } else {
        $print("✗ test_set_withCap\n");
        failed = failed + 1;
    };
    
    // Test 7: Uniqueness
    if test_set_uniqueness() == 1 {
        $print("✓ test_set_uniqueness\n");
        passed = passed + 1;
    } else {
        $print("✗ test_set_uniqueness\n");
        failed = failed + 1;
    };
    
    $print("\n--- Results ---\n");
    $print("Passed: ");
    $print(passed);
    $print("\nFailed: ");
    $print(failed);
    $print("\n");
    
    return failed;
}
