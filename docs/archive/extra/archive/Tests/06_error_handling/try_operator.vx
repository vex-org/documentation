// Test try operator (?) usage
// Expected: All assertions pass

fn parse_positive(n: i32): Result<i32, string> {
    if n < 0 {
        return Err("Negative number");
    }
    return Ok(n);
}

fn process(n: i32): Result<i32, string> {
    // The ? operator should propagate error or unwrap value
    let val = parse_positive(n)?;
    return Ok(val * 2);
}

fn main(): i32 {
    // Success case
    let res1 = process(10);
    match res1 {
        Ok(val) => assert(val == 20, "Try operator success"),
        Err(_) => assert(false, "Should not fail"),
    }

    // Failure propagation case
    let res2 = process(-5);
    match res2 {
        Ok(_) => assert(false, "Should fail"),
        Err(msg) => assert(msg == "Negative number", "Try operator propagation"),
    }

    $print("âœ… All try operator tests passed!");
    return 0;
}
